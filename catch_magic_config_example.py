#!/usr/bin/env python3
"""
catch_magic.py 配置示例
展示如何配置 autobrr_lb 集成功能
"""

# =============================================================================
# 基础配置（必需）
# =============================================================================

# U2 站点 cookie（必需）
COOKIES = {'nexusphp_u2': 'your_u2_cookie_here'}

# =============================================================================
# autobrr_lb 集成配置
# =============================================================================

# 是否使用 autobrr_lb 推送种子
USE_AUTOBRR_LB = True  # True=推送到负载均衡器，False=下载到本地目录

# autobrr_lb 负载均衡器配置
AUTOBRR_LB_URL = 'http://192.168.1.100:5001'  # 负载均衡器地址
AUTOBRR_LB_PATH = '/webhook/secure-u2-magic-xxx'  # webhook 路径
AUTOBRR_LB_CATEGORY = 'U2-Magic'  # 种子分类
AUTOBRR_LB_TIMEOUT = 10  # 推送超时时间（秒）

# 回退机制
FALLBACK_TO_LOCAL = True  # 当 autobrr_lb 推送失败时是否回退到本地下载

# =============================================================================
# 本地下载配置（当 USE_AUTOBRR_LB=False 时使用）
# =============================================================================

# 备份种子文件夹路径
BK_DIR = '/root/backup'

# BT 客户端监控文件夹
WT_DIR = '/de/wt'

# =============================================================================
# 其他配置
# =============================================================================

# 检查魔法的时间间隔（秒）
INTERVAL = 120

# 最大的做种人数，超过不下载
MAX_SEEDER_NUM = 5

# 是否下载旧种子
DOWNLOAD_OLD = True

# 是否下载新种子
DOWNLOAD_NEW = False

# 是否下载非免费种子
DOWNLOAD_NON_FREE = False

# 种子发布时间超过此天数判断为旧种子
MIN_DAY = 7

# =============================================================================
# 使用说明
# =============================================================================

"""
配置步骤：

1. 设置 U2 cookie：
   - 登录 U2 站点
   - 从浏览器开发者工具中复制 cookie
   - 填入 COOKIES 变量

2. 选择运行模式：

   模式A：使用 autobrr_lb（推荐）
   - 设置 USE_AUTOBRR_LB = True
   - 配置 AUTOBRR_LB_URL 和 AUTOBRR_LB_PATH
   - 设置 FALLBACK_TO_LOCAL = True（推荐）

   模式B：本地下载
   - 设置 USE_AUTOBRR_LB = False
   - 配置 BK_DIR 和 WT_DIR 路径

3. 调整其他参数：
   - INTERVAL：检查间隔
   - MAX_SEEDER_NUM：最大做种人数
   - DOWNLOAD_OLD/NEW：下载策略

4. 运行脚本：
   python catch_magic.py

注意事项：
- 首次运行建议设置 RUN_CRONTAB = True 进行测试
- 确保 autobrr_lb 服务正常运行
- 检查网络连接和防火墙设置
- 查看日志文件了解运行状态
"""
